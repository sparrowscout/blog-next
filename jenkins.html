<!DOCTYPE html><!--OcgsnW_le_Xk0bEK_0iuQ--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="preload" href="/_next/static/media/545d602790193b00-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/img/jenkins(2).png"/><link rel="preload" as="image" href="/img/jenkins(3).png"/><link rel="preload" as="image" href="/img/jenkins(4).png"/><link rel="stylesheet" href="/_next/static/css/5211d78018a0e7c4.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/42a7405719b7e933.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-f2190a49a57f2d7c.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-e6913bbd3aef8c7b.js" async=""></script><script src="/_next/static/chunks/main-app-ff58e8a8078081ff.js" async=""></script><script src="/_next/static/chunks/987-b5d202e4a91ac0c9.js" async=""></script><script src="/_next/static/chunks/627-d52ecd6ebac85575.js" async=""></script><script src="/_next/static/chunks/682-4a2ed3c8fe2f930e.js" async=""></script><script src="/_next/static/chunks/app/layout-1c6386b24f598b13.js" async=""></script><meta name="next-size-adjust" content=""/><title>my-cabinet</title><meta name="description" content="공부했던 내용, 작업했던 내용, 트러블 슈팅 기록용 블로그"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="h-dvh w-full __className_dd9a7c  bg-[repeating-linear-gradient(to_bottom,_#f8f8f8,_#f8f8f8_30px,_#000000_31px)] antialiased"><div hidden=""><!--$--><!--/$--></div><div class="fixed z-50 flex  h-20 w-full items-center justify-between px-3"><div class="flex w-1/2  gap-2"><div class="relative flex h-14 w-14  cursor-pointer items-center justify-center border-[1px] border-black bg-white"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="36" height="36" style="fill:#ff01ff"><g clip-path="url(#clip0_17_2059)"><path d="M15.41 16.59L10.83 12L15.41 7.41L14 6L8 12L14 18L15.41 16.59Z" fill="current"></path></g><defs></defs></svg></div></div><div class="flex w-1/2 justify-end gap-2 pl-10"><div class="relative flex h-14 w-14  cursor-pointer items-center justify-center border-[1px] border-black bg-white"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="36" height="36" style="fill:#ff01ff"><g clip-path="url(#clip0_6_12270)"><path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" fill="current"></path></g><defs><clipPath id="clip0_6_12270"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg></div><div class="relative flex h-14 w-14  cursor-pointer items-center justify-center border-[1px] border-black bg-white"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="fill:#FF01FF" width="36" height="36"><g clip-path="url(#clip0_6_13413)"><path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="current"></path></g><defs></defs></svg></div></div><a href="/"><div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"><div class="relative flex h-14 w-14  cursor-pointer items-center justify-center border-[1px] border-black bg-white"><img alt="go home" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;position:absolute;object-fit:contain;padding:8px" src="/_next/static/media/home.a0f8a151.png"/></div></div></a></div><div class="h-dvh select-text overflow-scroll pb-36 pl-3 pr-2 pt-24 md:px-5"><article class=" box-border border-[1px] border-gray-900 bg-white p-4"><h1>Jenkins로 배포 자동화 설정하기 (npm package)</h1><h1>Jenkins란?</h1>
<p>✏️ 빌드, 테스트, 배포와 관련된 모든 종류의 작업을 자동화하는데 사용할 수 있는 독립형 오픈 소스 자동화 서버, 대부분의 CI/CD 배포 라이브러리들의 기본적인 구조는 Jenkins와 비슷합니다.<br/></p>
<br/>
<p>프론트엔드 페이지를 배포하거나, 내부 SDK를 배포할 때 배포 단계를 자동화 시키고 싶어서 사용해보게 됐습니다. 사내 git 저장소로는 bitbucket을 사용하고 있어서 bitbucket pipeline을 사용할 수도 있지만 오히려 Jenkins로 설정하는게 추후 확장성에 좋을 것 같아서 Jenkins를 선택했습니다. <br/></p>
<br/>
<h1>배포 단계 그려보기</h1>
<p><img src="/img/jenkins(2).png" alt="젠킨스를 이용한 배포 단계"/></p>
<p>젠킨스를 이용한 배포 단계를 크게보면 이렇습니다.</p>
<ol>
<li>개발자가 특정 저장소에 push</li>
<li>저장소와 연결된 web hook이 해당 push 이벤트를 젠킨스에게 전달</li>
<li>push 이벤트를 전달받은 젠킨스가 작성된 스크립트에 따라 빌드, 테스트, 배포 진행</li>
</ol>
<p>세부사항은 물론 저장소마다, 배포하려는 프로젝트마다 다르겠지만 이렇게 이해하고 다가가야 장벽이 좀 낮아지는 느낌이고, 어디에 뭘 연결해서 무슨 데이터를 보내는지 이해가 됩니다.</p>
<br/>
<h2>연결하기</h2>
<p>✏️ 이벤트가 흘러가는 흐름을 따라 연결해줍니다.</p>
<p><img src="/img/jenkins(3).png" alt="무엇과 무엇을 연결해야하는지"/></p>
<br/>
<h2>파이프라인 시나리오 작성하기</h2>
<p>✏️ 확장성이 좋다는 말은, 플러그인도 많고 옵션도 많고 이런저런 선택지가 많아서 그 중에 프로젝트에 맞는 선택을 해야한다는 뜻입니다. 개발자가 원하는 시나리오를 먼저 정확히 알고 있어야 스크립트 작성 중간에 파이프라인 종류를 바꿔야하거나 하는 불상사를 막을 수 있습니다.<br/></p>
<br/>
<h2>스크립트 작성하기</h2>
<p>✏️ push 이벤트를 받아서 젠킨스가 트리거된 후, 젠킨스가 실행시킬 파이프라인을 작성합니다. 파이프라인 문법에는 선언적 파이프라인과 스크립트 파이프라인이 있습니다. 구조는 비슷합니다. 저는 선언적 파이프라인 안에 스크립트 파이프라인을 작성했습니다. <br/></p>
<br/>
<ul>
<li>스크립트 예시</li>
</ul>
<ol>
<li>git message와 npm version을 체크해서 배포하려고 고군분투 했던 JenkinsFile ....</li>
</ol>
<pre class="language-groovy"><code class="language-groovy code-highlight"><span class="code-line line-number" line="1">pipeline <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    agent any
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">    environment <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">        GIT_MESSAGE <span class="token operator">=</span> <span class="token function">get_commit_msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">    tools <span class="token punctuation">{</span>nodejs <span class="token interpolation-string"><span class="token string">&quot;NodeJS&quot;</span></span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">    stages <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">            steps <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="13">                echo <span class="token string">&#x27;Hello...&#x27;</span>
</span><span class="code-line line-number" line="14">            <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="15">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#x27;Build&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="18">            steps <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">                    sh <span class="token interpolation-string"><span class="token string">&quot;git log -1&quot;</span></span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">            script <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">                <span class="token keyword">def</span> npmVersion <span class="token operator">=</span> <span class="token function">get_npm_version</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="24">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">npmVersion</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="25">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">env<span class="token punctuation">.</span>GIT_MESSAGE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="26">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">env<span class="token punctuation">.</span>GIT_MESSAGE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="27">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">env<span class="token punctuation">.</span>GIT_COMMIT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="28">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">GIT_COMMIT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="29">                <span class="token keyword">def</span> isUpdate <span class="token operator">=</span> <span class="token function">get_commit_subject</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;Update&quot;</span></span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="30">                <span class="token keyword">def</span> isFeature <span class="token operator">=</span> <span class="token function">get_commit_subject</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;Feature&quot;</span></span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="31">                <span class="token keyword">def</span> isMajor <span class="token operator">=</span> isFeature <span class="token operator">==</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="32">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">isUpdate</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="33">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">isFeature</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="34">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">isMajor</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="35">                <span class="token keyword">if</span><span class="token punctuation">(</span>isMajor<span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="36">                sh <span class="token interpolation-string"><span class="token string">&quot;npm version major&quot;</span></span>
</span><span class="code-line line-number" line="37">                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="38">                sh <span class="token interpolation-string"><span class="token string">&quot;npm version minor&quot;</span></span>
</span><span class="code-line line-number" line="39">                <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="40">                echo <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">npmVersion</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="41">                sh <span class="token interpolation-string"><span class="token string">&quot;git pull&quot;</span></span>
</span><span class="code-line line-number" line="42">                sh <span class="token interpolation-string"><span class="token string">&quot;git pull origin </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">BRANCH_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="43">                sh <span class="token interpolation-string"><span class="token string">&quot;git fetch origin </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">BRANCH_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
</span><span class="code-line line-number" line="44">
</span><span class="code-line line-number" line="45">                sh <span class="token interpolation-string"><span class="token string">&quot;git status&quot;</span></span>
</span><span class="code-line line-number" line="46">                sh <span class="token interpolation-string"><span class="token string">&quot;git push --set-upstream origin </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">BRANCH_NAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> --force&quot;</span></span>
</span><span class="code-line line-number" line="47">                sh <span class="token interpolation-string"><span class="token string">&quot;git tag&quot;</span></span>
</span><span class="code-line line-number" line="48">                sh <span class="token interpolation-string"><span class="token string">&quot;git config --list&quot;</span></span>
</span><span class="code-line line-number" line="49">
</span><span class="code-line line-number" line="50">                sh <span class="token interpolation-string"><span class="token string">&quot;git push origin --tags&quot;</span></span>
</span><span class="code-line line-number" line="51">                sh <span class="token interpolation-string"><span class="token string">&quot;npm publish&quot;</span></span>
</span><span class="code-line line-number" line="52">              <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="53">              <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="54">          <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="55">      <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="56">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="57">
</span><span class="code-line line-number" line="58">  <span class="token keyword">def</span> <span class="token function">get_commit_msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="59">  script<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="60">  <span class="token keyword">return</span> <span class="token function">sh</span><span class="token punctuation">(</span>script<span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">&quot;git show -s --format=%B </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">env<span class="token punctuation">.</span>GIT_COMMIT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span> returnStdout<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="61">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="62">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="63">
</span><span class="code-line line-number" line="64">  <span class="token keyword">def</span> <span class="token function">get_commit_subject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="65">  script<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="66">  <span class="token keyword">return</span> <span class="token function">sh</span><span class="token punctuation">(</span>script<span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">&quot;git show -s --format=%B </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">env<span class="token punctuation">.</span>GIT_COMMIT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span> returnStdout<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="67">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="68">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="69">
</span><span class="code-line line-number" line="70">  <span class="token keyword">def</span> <span class="token function">get_commit_author</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="71">  script<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="72">  <span class="token keyword">return</span> <span class="token function">sh</span><span class="token punctuation">(</span>script<span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">&quot;git --no-pager show -s --format=%an </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">env<span class="token punctuation">.</span>GIT_COMMIT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span>returnStdout<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="73">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="74">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="75">
</span><span class="code-line line-number" line="76">  <span class="token keyword">def</span> <span class="token function">get_npm_version</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="77">  script<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="78">  <span class="token keyword">return</span> <span class="token function">sh</span><span class="token punctuation">(</span>script<span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">&quot;npm show dummy-jenkins version&quot;</span></span><span class="token punctuation">,</span>returnStdout<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="79">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="80">  <span class="token punctuation">}</span>
</span></code></pre>
<br/>
<ol start="2">
<li>처음에 젠킨스 설정 후 테스트하려고 작성했던 Jenkins file</li>
</ol>
<pre class="language-groovy"><code class="language-groovy code-highlight"><span class="code-line line-number" line="1">pipeline <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">    agent any
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">    tools <span class="token punctuation">{</span>nodejs <span class="token interpolation-string"><span class="token string">&quot;NodeJS&quot;</span></span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">    stages <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">            steps <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">                echo <span class="token string">&#x27;Hello..&#x27;</span>
</span><span class="code-line line-number" line="12">            <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#x27;for the fix branch&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="16">            when <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="17">                branch <span class="token interpolation-string"><span class="token string">&quot;fix-*&quot;</span></span>
</span><span class="code-line line-number" line="18">            <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="19">            steps <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="20">                echo <span class="token string">&#x27;this only runs for the fix branches&#x27;</span>
</span><span class="code-line line-number" line="21">            <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="23">
</span><span class="code-line line-number" line="24">        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">&#x27;for the PR branch&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="25">            when <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">                branch <span class="token interpolation-string"><span class="token string">&quot;PR-*&quot;</span></span>
</span><span class="code-line line-number" line="27">            <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="28">            steps <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">                echo <span class="token string">&#x27;this only runs for the PR branches&#x27;</span>
</span><span class="code-line line-number" line="30">            <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="31">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="32">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="33">
</span><span class="code-line line-number" line="34"><span class="token punctuation">}</span>
</span></code></pre>
<br/>
<h2>저장소에 push해서 테스트하기</h2>
<p>✏️ 설정한 저장소에 새 push commit을 넣어서 실제로 테스트해봅시다! <br/></p>
<br/>
<p>새 push commit을 넣고 Jenkins에서 Stage 별로 진행되는 것을 UI로 확인해볼 수 있습니다.</p>
<ul>
<li>
<p>Stage View <br/>
파이프라인에서 설정한 Stage 별 경과 시간과 실행한 step을 간결하게 확인할 수 있습니다. Stage &#x27;for the fix branch&#x27;에서는 브랜치 명이 fix로 시작할 때만 step을 실행하도록 파이프라인을 작성했기 때문에 현재 브랜치인 PR-1에서는 건너뛴 모습입니다.</p>
<p><img src="/img/jenkins(4).png" alt="stage별 진행"/></p>
</li>
<li>
<p>Scan Oragnization Folder Log (위의 UI에서 소비 시간을 클릭하면 log를 볼 수 있습니다) <br/>
처음에 연결하는 단계에서 잘못되거나, 스크립트가 잘못된 경우 로그를 확인하면서 따라가면 디버깅할 수 있습니다.</p>
</li>
</ul></article></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-f2190a49a57f2d7c.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5495,[\"987\",\"static/chunks/987-b5d202e4a91ac0c9.js\",\"627\",\"static/chunks/627-d52ecd6ebac85575.js\",\"682\",\"static/chunks/682-4a2ed3c8fe2f930e.js\",\"177\",\"static/chunks/app/layout-1c6386b24f598b13.js\"],\"default\"]\n3:I[9264,[\"987\",\"static/chunks/987-b5d202e4a91ac0c9.js\",\"627\",\"static/chunks/627-d52ecd6ebac85575.js\",\"682\",\"static/chunks/682-4a2ed3c8fe2f930e.js\",\"177\",\"static/chunks/app/layout-1c6386b24f598b13.js\"],\"default\"]\n4:I[7555,[],\"\"]\n5:I[1295,[],\"\"]\n7:I[9665,[],\"OutletBoundary\"]\n9:I[4911,[],\"AsyncMetadataOutlet\"]\nb:I[9665,[],\"ViewportBoundary\"]\nd:I[9665,[],\"MetadataBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[8393,[],\"\"]\n:HL[\"/_next/static/media/545d602790193b00-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/5211d78018a0e7c4.css\",\"style\"]\n:HL[\"/_next/static/css/42a7405719b7e933.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"OcgsnW-le-Xk0bEK_0iuQ\",\"p\":\"\",\"c\":[\"\",\"jenkins\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(content)\",{\"children\":[[\"slug\",\"jenkins\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5211d78018a0e7c4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/42a7405719b7e933.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"h-dvh w-full __className_dd9a7c  bg-[repeating-linear-gradient(to_bottom,_#f8f8f8,_#f8f8f8_30px,_#000000_31px)] antialiased\",\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"(content)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:notFound:0:1:props:style\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:notFound:0:1:props:children:props:children:1:props:style\",\"children\":404}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:notFound:0:1:props:children:props:children:2:props:style\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style\",\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"jenkins\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",[\"$\",\"$L9\",null,{\"promise\":\"$@a\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$e\",null,{\"fallback\":null,\"children\":\"$Lf\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"11:I[8175,[],\"IconMark\"]\na:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"my-cabinet\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"공부했던 내용, 작업했던 내용, 트러블 슈팅 기록용 블로그\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"$L11\",\"3\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"f:\"$a:metadata\"\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"h-dvh select-text overflow-scroll pb-36 pl-3 pr-2 pt-24 md:px-5\",\"children\":[\"$\",\"article\",null,{\"className\":\" box-border border-[1px] border-gray-900 bg-white p-4\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Jenkins로 배포 자동화 설정하기 (npm package)\"}],[[\"$\",\"h1\",null,{\"children\":\"Jenkins란?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"✏️ 빌드, 테스트, 배포와 관련된 모든 종류의 작업을 자동화하는데 사용할 수 있는 독립형 오픈 소스 자동화 서버, 대부분의 CI/CD 배포 라이브러리들의 기본적인 구조는 Jenkins와 비슷합니다.\",[\"$\",\"br\",null,{}]]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"프론트엔드 페이지를 배포하거나, 내부 SDK를 배포할 때 배포 단계를 자동화 시키고 싶어서 사용해보게 됐습니다. 사내 git 저장소로는 bitbucket을 사용하고 있어서 bitbucket pipeline을 사용할 수도 있지만 오히려 Jenkins로 설정하는게 추후 확장성에 좋을 것 같아서 Jenkins를 선택했습니다. \",[\"$\",\"br\",null,{}]]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"배포 단계 그려보기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/img/jenkins(2).png\",\"alt\":\"젠킨스를 이용한 배포 단계\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"젠킨스를 이용한 배포 단계를 크게보면 이렇습니다.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"개발자가 특정 저장소에 push\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"저장소와 연결된 web hook이 해당 push 이벤트를 젠킨스에게 전달\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"push 이벤트를 전달받은 젠킨스가 작성된 스크립트에 따라 빌드, 테스트, 배포 진행\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"세부사항은 물론 저장소마다, 배포하려는 프로젝트마다 다르겠지만 이렇게 이해하고 다가가야 장벽이 좀 낮아지는 느낌이고, 어디에 뭘 연결해서 무슨 데이터를 보내는지 이해가 됩니다.\"}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"연결하기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"✏️ 이벤트가 흘러가는 흐름을 따라 연결해줍니다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/img/jenkins(3).png\",\"alt\":\"무엇과 무엇을 연결해야하는지\"}]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"파이프라인 시나리오 작성하기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"✏️ 확장성이 좋다는 말은, 플러그인도 많고 옵션도 많고 이런저런 선택지가 많아서 그 중에 프로젝트에 맞는 선택을 해야한다는 뜻입니다. 개발자가 원하는 시나리오를 먼저 정확히 알고 있어야 스크립트 작성 중간에 파이프라인 종류를 바꿔야하거나 하는 불상사를 막을 수 있습니다.\",[\"$\",\"br\",null,{}]]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"스크립트 작성하기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"✏️ push 이벤트를 받아서 젠킨스가 트리거된 후, 젠킨스가 실행시킬 파이프라인을 작성합니다. 파이프라인 문법에는 선언적 파이프라인과 스크립트 파이프라인이 있습니다. 구조는 비슷합니다. 저는 선언적 파이프라인 안에 스크립트 파이프라인을 작성했습니다. \",[\"$\",\"br\",null,{}]]}],\"\\n\",[\"$\",\"br\",null,{}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"스크립트 예시\"}],\"\\n\"]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"git message와 npm version을 체크해서 배포하려고 고군분투 했던 JenkinsFile ....\"}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-groovy\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-groovy code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[\"pipeline \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":\"    agent any\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[\"    environment \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"        GIT_MESSAGE \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_commit_msg\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"    tools \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"nodejs \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"NodeJS\\\"\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[\"    stages \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Hello'\"}],\"$L12\",\" \",\"$L13\",\"\\n\"]}],\"$L14\",\"$L15\",\"$L16\",\"$L17\",\"$L18\",\"$L19\",\"$L1a\",\"$L1b\",\"$L1c\",\"$L1d\",\"$L1e\",\"$L1f\",\"$L20\",\"$L21\",\"$L22\",\"$L23\",\"$L24\",\"$L25\",\"$L26\",\"$L27\",\"$L28\",\"$L29\",\"$L2a\",\"$L2b\",\"$L2c\",\"$L2d\",\"$L2e\",\"$L2f\",\"$L30\",\"$L31\",\"$L32\",\"$L33\",\"$L34\",\"$L35\",\"$L36\",\"$L37\",\"$L38\",\"$L39\",\"$L3a\",\"$L3b\",\"$L3c\",\"$L3d\",\"$L3e\",\"$L3f\",\"$L40\",\"$L41\",\"$L42\",\"$L43\",\"$L44\",\"$L45\",\"$L46\",\"$L47\",\"$L48\",\"$L49\",\"$L4a\",\"$L4b\",\"$L4c\",\"$L4d\",\"$L4e\",\"$L4f\",\"$L50\",\"$L51\",\"$L52\",\"$L53\",\"$L54\",\"$L55\",\"$L56\",\"$L57\",\"$L58\"]}]}],\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\"]]}]}]\n"])</script><script>self.__next_f.push([1,"12:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n13:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n14:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"            steps \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n15:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Hello...'\"}],\"\\n\"]}]\n16:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n17:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n18:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}]\n19:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Build'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n1a:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"            steps \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n1b:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"                    sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git log -1\\\"\"}]}],\"\\n\"]}]\n1c:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":\"\\n\"}]\n1d:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"            script \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"c"])</script><script>self.__next_f.push([1,"hildren\":\"{\"}],\"\\n\"]}]\n1e:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":\"\\n\"}]\n1f:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" npmVersion \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_npm_version\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n20:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"npmVersion\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"21:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":[\"env\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"GIT_MESSAGE\"]}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"22:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":[\"env\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"GIT_MESSAGE\"]}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"23:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":[\"env\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"GIT_COMMIT\"]}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"24:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"GIT_COMMIT\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n25:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" isUpdate \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_commit_subject\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Update\\\"\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n26:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" isFeature \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_commit_subject\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Feature\\\"\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n27:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" isMajor \",[\""])</script><script>self.__next_f.push([1,"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" isFeature \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"\\n\"]}]\n28:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"isUpdate\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n29:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"isFeature\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n2a:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"isMajor\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"chi"])</script><script>self.__next_f.push([1,"ldren\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n2b:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"isMajor\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n2c:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"npm version major\\\"\"}]}],\"\\n\"]}]\n2d:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"else\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n2e:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"npm version minor\\\"\"}]}],\"\\n\"]}]\n2f:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n30:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"npmVersion\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"chil"])</script><script>self.__next_f.push([1,"dren\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n31:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git pull\\\"\"}]}],\"\\n\"]}]\n32:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git pull origin \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"BRANCH_NAME\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n33:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git fetch origin \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"BRANCH_NAME\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],\"\\n\"]}]\n34:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":\"\\n\"}]\n35:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git status\\\"\"}]}],\"\\n\"]}]\n36:[\"$\",\"span\",null,{\"className\":\"code-li"])</script><script>self.__next_f.push([1,"ne line-number\",\"line\":\"46\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git push --set-upstream origin \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":\"BRANCH_NAME\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\" --force\\\"\"}]]}],\"\\n\"]}]\n37:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git tag\\\"\"}]}],\"\\n\"]}]\n38:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git config --list\\\"\"}]}],\"\\n\"]}]\n39:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":\"\\n\"}]\n3a:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git push origin --tags\\\"\"}]}],\"\\n\"]}]\n3b:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"51\",\"children\":[\"                sh \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"npm publish\\\"\"}]}],\"\\n\"]}]\n3c:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"52\",\"children\":[\"              \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n3d:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"53\",\"children\":[\"              \",["])</script><script>self.__next_f.push([1,"\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n3e:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"54\",\"children\":[\"          \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n3f:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"55\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n40:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"56\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n41:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"57\",\"children\":\"\\n\"}]\n42:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"58\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_commit_msg\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n43:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"59\",\"children\":[\"  script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"44:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"60\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git show -s --format=%B \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":[\"env\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"GIT_COMMIT\"]}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" returnStdout\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"trim\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"45:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"61\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n46:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"62\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n47:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"63\",\"children\":\"\\n\"}]\n48:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"64\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_commit_subject\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"subject\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n49:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"65\",\"children\":[\"  script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"4a:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"66\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git show -s --format=%B \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":[\"env\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"GIT_COMMIT\"]}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" returnStdout\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"trim\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"indexOf\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"subject\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"4b:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"67\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n4c:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"68\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n4d:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"69\",\"children\":\"\\n\"}]\n4e:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"70\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_commit_author\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n4f:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"71\",\"children\":[\"  script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"50:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"72\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"git --no-pager show -s --format=%an \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token expression\",\"children\":[\"env\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"GIT_COMMIT\"]}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"returnStdout\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"trim\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"51:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"73\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n52:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"74\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n53:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"75\",\"children\":\"\\n\"}]\n54:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"76\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"get_npm_version\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n55:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"77\",\"children\":[\"  script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"56:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"78\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"script\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"npm show dummy-jenkins version\\\"\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"returnStdout\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"trim\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"57:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"79\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n58:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"80\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n59:[\"$\",\"br\",null,{}]\n5a:[\"$\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"처음에 젠킨스 설정 후 테스트하려고 작성했던 Jenkins file\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"5b:[\"$\",\"pre\",null,{\"className\":\"language-groovy\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-groovy code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[\"pipeline \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"    agent any\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"    tools \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"nodejs \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"NodeJS\\\"\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[\"    stages \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Hello'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[\"            steps \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Hello..'\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'for the fix branch'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[\"            when \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"                branch \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"fix-*\\\"\"}]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"            steps \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'this only runs for the fix branches'\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'for the PR branch'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],\"$L62\",\"$L63\",\"$L64\",\"$L65\",\"$L66\",\"$L67\",\"$L68\",\"$L69\",\"$L6a\",\"$L6b\"]}]}]\n"])</script><script>self.__next_f.push([1,"5c:[\"$\",\"br\",null,{}]\n5d:[\"$\",\"h2\",null,{\"children\":\"저장소에 push해서 테스트하기\"}]\n5e:[\"$\",\"p\",null,{\"children\":[\"✏️ 설정한 저장소에 새 push commit을 넣어서 실제로 테스트해봅시다! \",[\"$\",\"br\",null,{}]]}]\n5f:[\"$\",\"br\",null,{}]\n60:[\"$\",\"p\",null,{\"children\":\"새 push commit을 넣고 Jenkins에서 Stage 별로 진행되는 것을 UI로 확인해볼 수 있습니다.\"}]\n61:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Stage View \",[\"$\",\"br\",null,{}],\"\\n파이프라인에서 설정한 Stage 별 경과 시간과 실행한 step을 간결하게 확인할 수 있습니다. Stage 'for the fix branch'에서는 브랜치 명이 fix로 시작할 때만 step을 실행하도록 파이프라인을 작성했기 때문에 현재 브랜치인 PR-1에서는 건너뛴 모습입니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/img/jenkins(4).png\",\"alt\":\"stage별 진행\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Scan Oragnization Folder Log (위의 UI에서 소비 시간을 클릭하면 log를 볼 수 있습니다) \",[\"$\",\"br\",null,{}],\"\\n처음에 연결하는 단계에서 잘못되거나, 스크립트가 잘못된 경우 로그를 확인하면서 따라가면 디버깅할 수 있습니다.\"]}],\"\\n\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"62:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"            when \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n63:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"                branch \",[\"$\",\"span\",null,{\"className\":\"token interpolation-string\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"PR-*\\\"\"}]}],\"\\n\"]}]\n64:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n65:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"            steps \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}]\n66:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"                echo \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'this only runs for the PR branches'\"}],\"\\n\"]}]\n67:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n68:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n69:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n6a:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":\"\\n\"}]\n6b:[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]\n"])</script></body></html>